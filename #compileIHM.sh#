echo "üì¶ Compilation en cours..."

# Trouver tous les .java sauf ceux dans src/App/
find src -name "*.java" ! -path "src/App/*" > sources.txt

# Compilation avec JavaFX et MariaDB JDBC
javac --module-path "/usr/share/openjfx/lib/" \
      --add-modules javafx.controls,javafx.fxml \
      -cp lib/mariadb-java-client-3.3.2.jar \
      -d bin @sources.txt

# V√©rification du succ√®s de la compilation
if [ $? -ne 0 ]; then
    echo "‚ùå Erreur de compilation"
    rm sources.txt
    exit 1
fi

rm sources.txt
echo "‚úÖ Compilation r√©ussie"

echo "üöÄ Lancement de l'application..."

# Ex√©cution de la classe principale
java --module-path "/usr/share/openjfx/lib/" \
     --add-modules javafx.controls,javafx.fxml \
     -cp "bin:lib/mariadb-java-client-2.5.3.jar" \
     IHM.FenetreMagasins
